# SPDX-License-Identifier: LGPL-2.1-or-later
# SPDX-FileCopyrightText: 2021 Andy Holmes

#
# Known Bugs
#
# The errors below are either known bugs being tracked or undiagnosed.
#
mutex:valent_*_get_type_once

# src/libvalent/core/valent-transfer.c
race:execute_task

# src/plugins/sms/valent-sms-store.c
# NOTE: ThreadSanitizer really doesn't like this, but ownership seems to be
#       transferred correctly.
race:valent_sms_store_thread

#
# False Positives
#
# The errors below seem to be false positives.
#

# src/libvalent/contacts/valent-contact-store.c
race:valent_contact_store_emit_contact_added_main
race:valent_contact_store_emit_contact_removed_main


#
# Uninstrumented libraries (core, components, ui, plugins)
#
called_from_lib:libglib-2
called_from_lib:libgobject-2
called_from_lib:libgio-2
called_from_lib:libjson-glib-1
called_from_lib:libpeas-1
called_from_lib:libgnutls

called_from_lib:libebackend-1.2
called_from_lib:libebook-1.2
called_from_lib:libebook-contacts-1.2
called_from_lib:libedata-book
called_from_lib:libedataserver-1.2

called_from_lib:libgdk-4
called_from_lib:libgsk-4
called_from_lib:libgtk-4
called_from_lib:libgdk_pixbuf-2
called_from_lib:libadwaita-1

# used by findmyphone plugin (possibly real races)
# See: https://gitlab.freedesktop.org/gstreamer/gstreamer/-/issues/217
#      https://gitlab.freedesktop.org/gstreamer/gstreamer/-/issues/218
called_from_lib:libgstreamer-1
called_from_lib:libgstplayback

# Called via GTlsConnection, likely caused by glib-networking
# See: https://gitlab.gnome.org/GNOME/glib-networking/-/issues/89
# See: https://www.gnutls.org/manual/gnutls.html#Thread-safety
called_from_lib:p11-kit-trust
called_from_lib:libtasn1

# See: https://gitlab.gnome.org/GNOME/glib-networking/-/issues/184
mutex:g_tls_certificate_gnutls_get_type_once


# Indirect dependencies
called_from_lib:libcairo.so
called_from_lib:libfontconfig
called_from_lib:libgvfscommon
called_from_lib:libgvfsdbus
called_from_lib:libicui18n
called_from_lib:libicuuc
called_from_lib:libmedia-gstreamer.so
called_from_lib:libogg.so
called_from_lib:libpango-1
called_from_lib:libpangocairo-1
called_from_lib:libpangoft2
called_from_lib:libphonenumber
called_from_lib:libprotobuf
called_from_lib:libsqlite3
called_from_lib:libvorbis.so

called_from_lib:libX11.so
called_from_lib:libX11-xcb
called_from_lib:libXext
called_from_lib:libXau
called_from_lib:libxcb.so
called_from_lib:libXcomposite
called_from_lib:libXcursor
called_from_lib:libXdamage
called_from_lib:libXdmcp
called_from_lib:libXext
called_from_lib:libXfixes
called_from_lib:libXi.so
called_from_lib:libXrandr
called_from_lib:libXrender
called_from_lib:libXss

# Miscellaneous
deadlock:libEGL.so
deadlock:libEGL_mesa.so
deadlock:libGLX.so
deadlock:libGLX_mesa.so
mutex:libEGL_mesa.so
mutex:libGLX.so
mutex:libGLX_mesa.so
race:libEGL_mesa.so
race:radeonsi_dri

